"use strict";
/**
 * Created by user on 2017/10/26/026.
 */
Object.defineProperty(exports, "__esModule", { value: true });
class Coin {
    constructor(options = {}) {
        this.defaultOptions = {
            unit: 2,
            unit_level: 3,
            unit_names: [
                'G',
                'S',
                'C',
            ],
        };
        this.options = this._options(options);
    }
    _options(options = {}) {
        return Object.assign({}, this.defaultOptions, options);
    }
    toCoinObject(num, options = {}) {
        options = Object.assign({}, this.options, options);
        if (typeof options.unit == 'number') {
            options.unit = (new Array(options.unit_level)).fill(options.unit);
        }
        num = num.toString();
        let j = 0;
        let a = [];
        for (let i = (options.unit.length - 1); i > 0; i--) {
            j = j - options.unit[i];
            let c = num.substr(j, options.unit[i]);
            a[i] = c;
        }
        let c = num.substr(0, num.length + j);
        a[0] = c;
        return new CoinObject(a.map(i => parseInt(i)), options);
    }
    static padStr(n, len) {
        n = n.toString();
        if (n.length < len) {
            n = '0'.repeat(len - n.length) + n;
        }
        return n;
    }
}
exports.Coin = Coin;
class CoinObject {
    constructor(data, options = {}) {
        this.data = data;
        this.options = options;
    }
    toObject(pad = false) {
        let ret = {};
        for (let i = 0; i < this.options.unit_names.length; i++) {
            ret[this.options.unit_names[i]] = pad ? Coin.padStr(this.data[i], this.options.unit[i]) : this.data[i];
        }
        return ret;
    }
    toJSON(pad = false) {
        return this.toObject(pad);
    }
    toNumber() {
        let self = this;
        let n = this.data.map((n, i) => {
            return Coin.padStr(n, self.options.unit[i]);
        }).join('');
        return parseInt(n);
    }
    toString(pad = false) {
        let c = [];
        for (let i = 0; i < this.data.length; i++) {
            if (this.data[i]) {
                let n = this.data[i];
                if (pad) {
                    n = Coin.padStr(n, this.options.unit[i]);
                }
                c.push(`${n} ${this.options.unit_names[i]}`);
            }
        }
        return c.join(' ');
    }
    toArray() {
        return this.data.slice();
    }
}
exports.CoinObject = CoinObject;
exports.default = exports;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiRDovVXNlcnMvRG9jdW1lbnRzL1RoZSBQcm9qZWN0L0dhbWUvR3VpbGQgV2FycyAyL2d3Mi1jb2luLyIsInNvdXJjZXMiOlsiaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQVlIO0lBZUMsWUFBWSxVQUF3QixFQUFFO1FBWi9CLG1CQUFjLEdBQUc7WUFDdkIsSUFBSSxFQUFFLENBQUM7WUFDUCxVQUFVLEVBQUUsQ0FBQztZQUNiLFVBQVUsRUFBRTtnQkFDWCxHQUFHO2dCQUNILEdBQUc7Z0JBQ0gsR0FBRzthQUNIO1NBQ2UsQ0FBQztRQU1qQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVPLFFBQVEsQ0FBQyxVQUF3QixFQUFFO1FBRTFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxZQUFZLENBQUMsR0FBVSxFQUFFLFVBQXdCLEVBQUU7UUFFbEQsT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFbkQsRUFBRSxDQUFDLENBQUMsT0FBTyxPQUFPLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxDQUNwQyxDQUFDO1lBQ0EsT0FBTyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkUsQ0FBQztRQUVELEdBQUcsR0FBRyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFckIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsSUFBSSxDQUFDLEdBQUcsRUFB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QixDQUFDO0lBRUQsUUFBUSxDQUFDLE1BQWEsS0FBSztRQUUxQixJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFWCxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUN6QyxDQUFDO1lBQ0EsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNqQixDQUFDO2dCQUNBLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXJCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUNSLENBQUM7b0JBQ0EsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLENBQUM7Z0JBRUQsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDOUMsQ0FBQztRQUVGLENBQUM7UUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwQixDQUFDO0lBRUQsT0FBTztRQUVOLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzFCLENBQUM7Q0FDRDtBQW5FRCxnQ0FtRUM7QUFFRCxrQkFBZSxPQUFPLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE3LzEwLzI2LzAyNi5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIElDb2luT3B0aW9uc1xue1xuXHR1bml0PzogdkNvaW4gfCB2Q29pbltdO1xuXHR1bml0X2xldmVsPzogbnVtYmVyO1xuXHR1bml0X25hbWVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCB0eXBlIHZCb29sID0gbnVtYmVyIHwgYm9vbGVhbjtcbmV4cG9ydCB0eXBlIHZDb2luID0gbnVtYmVyIHwgc3RyaW5nO1xuXG5leHBvcnQgY2xhc3MgQ29pblxue1xuXG5cdHB1YmxpYyBkZWZhdWx0T3B0aW9ucyA9IHtcblx0XHR1bml0OiAyLFxuXHRcdHVuaXRfbGV2ZWw6IDMsXG5cdFx0dW5pdF9uYW1lczogW1xuXHRcdFx0J0cnLFxuXHRcdFx0J1MnLFxuXHRcdFx0J0MnLFxuXHRcdF0sXG5cdH0gYXMgSUNvaW5PcHRpb25zO1xuXG5cdHB1YmxpYyBvcHRpb25zOiBJQ29pbk9wdGlvbnM7XG5cblx0Y29uc3RydWN0b3Iob3B0aW9uczogSUNvaW5PcHRpb25zID0ge30pXG5cdHtcblx0XHR0aGlzLm9wdGlvbnMgPSB0aGlzLl9vcHRpb25zKG9wdGlvbnMpO1xuXHR9XG5cblx0cHJpdmF0ZSBfb3B0aW9ucyhvcHRpb25zOiBJQ29pbk9wdGlvbnMgPSB7fSlcblx0e1xuXHRcdHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblx0fVxuXG5cdHRvQ29pbk9iamVjdChudW06IHZDb2luLCBvcHRpb25zOiBJQ29pbk9wdGlvbnMgPSB7fSlcblx0e1xuXHRcdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLnVuaXQgPT0gJ251bWJlcicpXG5cdFx0e1xuXHRcdFx0b3B0aW9ucy51bml0ID0gKG5ldyBBcnJheShvcHRpb25zLnVuaXRfbGV2ZWwpKS5maWxsKG9wdGlvbnMudW5pdCk7XG5cdFx0fVxuXG5cdFx0bnVtID0gbnVtLnRvU3RyaW5nKCk7XG5cblx0XHRsZXQgaiA9IDA7XG5cdFx0bGV0IGEgPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAob3B0aW9ucy51bml0Lmxlbmd0aCAtIDEpOyBpID4gMDsgaS0tKVxuXHRcdHtcblx0XHRcdGogPSBqIC0gKG9wdGlvbnMudW5pdFtpXSBhcyBudW1iZXIpO1xuXG5cdFx0XHRsZXQgYyA9IG51bS5zdWJzdHIoaiwgb3B0aW9ucy51bml0W2ldIGFzIG51bWJlcik7XG5cblx0XHRcdGFbaV0gPSBjO1xuXHRcdH1cblxuXHRcdGxldCBjID0gbnVtLnN1YnN0cigwLCBudW0ubGVuZ3RoICsgaik7XG5cdFx0YVswXSA9IGM7XG5cblx0XHRyZXR1cm4gbmV3IENvaW5PYmplY3QoYS5tYXAoaSA9PiBwYXJzZUludChpKSksIG9wdGlvbnMpO1xuXHR9XG5cblx0c3RhdGljIHBhZFN0cihuLCBsZW4pXG5cdHtcblx0XHRuID0gbi50b1N0cmluZygpO1xuXG5cdFx0aWYgKG4ubGVuZ3RoIDwgbGVuKVxuXHRcdHtcblx0XHRcdG4gPSAnMCcucmVwZWF0KGxlbiAtIG4ubGVuZ3RoKSArIG47XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG47XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIENvaW5PYmplY3Rcbntcblx0cHVibGljIG9wdGlvbnM6IElDb2luT3B0aW9ucztcblx0cHJpdmF0ZSBkYXRhOiB2Q29pbltdO1xuXG5cdGNvbnN0cnVjdG9yKGRhdGEsIG9wdGlvbnM6IElDb2luT3B0aW9ucyA9IHt9KVxuXHR7XG5cdFx0dGhpcy5kYXRhID0gZGF0YTtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHR9XG5cblx0dG9PYmplY3QocGFkOiB2Qm9vbCA9IGZhbHNlKVxuXHR7XG5cdFx0bGV0IHJldCA9IHt9O1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9wdGlvbnMudW5pdF9uYW1lcy5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRyZXRbdGhpcy5vcHRpb25zLnVuaXRfbmFtZXNbaV1dID0gcGFkID8gQ29pbi5wYWRTdHIodGhpcy5kYXRhW2ldLCB0aGlzLm9wdGlvbnMudW5pdFtpXSkgOiB0aGlzLmRhdGFbaV07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdHRvSlNPTihwYWQ6IHZCb29sID0gZmFsc2UpXG5cdHtcblx0XHRyZXR1cm4gdGhpcy50b09iamVjdChwYWQpO1xuXHR9XG5cblx0dG9OdW1iZXIoKVxuXHR7XG5cdFx0bGV0IHNlbGYgPSB0aGlzO1xuXG5cdFx0bGV0IG4gPSB0aGlzLmRhdGEubWFwKChuLCBpKSA9PlxuXHRcdHtcblx0XHRcdHJldHVybiBDb2luLnBhZFN0cihuLCBzZWxmLm9wdGlvbnMudW5pdFtpXSk7XG5cdFx0fSkuam9pbignJyk7XG5cblx0XHRyZXR1cm4gcGFyc2VJbnQobik7XG5cdH1cblxuXHR0b1N0cmluZyhwYWQ6IHZCb29sID0gZmFsc2UpXG5cdHtcblx0XHRsZXQgYyA9IFtdO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspXG5cdFx0e1xuXHRcdFx0aWYgKHRoaXMuZGF0YVtpXSlcblx0XHRcdHtcblx0XHRcdFx0bGV0IG4gPSB0aGlzLmRhdGFbaV07XG5cblx0XHRcdFx0aWYgKHBhZClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG4gPSBDb2luLnBhZFN0cihuLCB0aGlzLm9wdGlvbnMudW5pdFtpXSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjLnB1c2goYCR7bn0gJHt0aGlzLm9wdGlvbnMudW5pdF9uYW1lc1tpXX1gKTtcblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBjLmpvaW4oJyAnKTtcblx0fVxuXG5cdHRvQXJyYXkoKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5zbGljZSgpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGV4cG9ydHM7XG4iXX0=